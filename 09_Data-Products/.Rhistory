class(filesbystate)
namesbystate0 <- read.table(filesbystate[[2]], sep = ",")
filesbystate[1]
filesbystate[[i]]
namesbystate <- data_frame()
for (i in filesbystate[]) {
namesbystate0 <- read.table(filesbystate[[i]], sep = ",")
namesbysate <- rbind(namesbysate, namesbystate0)
}
namesbystate <- data_frame()
for (i in filesbystate) {
namesbystate0 <- read.table(filesbystate[i], sep = ",")
namesbysate <- rbind(namesbysate, namesbystate0)
}
namesbystate <- data_frame()
for (i in filesbystate) {
namesbystate0 <- read.table(filesbystate[[i]], sep = ",")
namesbysate <- rbind(namesbysate, namesbystate0)
}
seq_along(filesbystate)
namesbystate <- data_frame()
for (i in seq_along(filesbystate)) {
namesbystate0 <- read.table(filesbystate[[i]], sep = ",")
namesbysate <- rbind(namesbysate, namesbystate0)
}
namesbystate <- data_frame()
for (i in seq_along(filesbystate)) {
namesbystate0 <- read.table(filesbystate[[i]], sep = ",")
namesbysate <- rbind(namesbystate, namesbystate0)
}
rm(namesbysate)
rm(names0)
namesbystate <- data_frame()
for (i in seq_along(filesbystate)) {
namesbystate0 <- read.table(filesbystate[[i]], sep = ",")
namesbystate <- rbind(namesbystate, namesbystate0)
}
View(namesbystate)
colnames(namesbystate) <- c("STATE","GENDER", "YEAR", "NAME", "COUNT")
rm(i, namesbystate0)
View(namesbystate)
names <- namesbystate %>% group_by(STATE, GENDER) %>% aggregate(sum)
names <- namesbystate %>% group_by(STATE, GENDER) %>% aggregate(FUN=sum)
names <- namesbystate %>% aggregate(by = c("STATE", "GENDER"), FUN=sum)
names <- namesbystate %>% aggregate(by = list("STATE", "GENDER"), FUN=sum)
?summary()
?summarise()
names <- namesbystate %>% group_by(STATE, GENDER) %>% summarise()
View(names)
names <- namesbystate %>% group_by(STATE, GENDER) %>% summarise(sum(COUNT))
View(names)
names <- namesbystate %>% group_by(STATE, GENDER, YEAR) %>% summarise(sum(COUNT))
View(names)
names <- namesbystate %>% group_by(GENDER, YEAR) %>% summarise(sum(COUNT))
View(names)
names <- namesbystate %>% group_by(YEAR, GENDER) %>% summarise(sum(COUNT))
View(namesbystate)
View(names)
names <- namesbystate %>% group_by(YEAR, GENDER, NAME) %>%
summarise(COUNT = sum(COUNT))
View(names)
suppressMessages(library(dplyr))
filesbystate <- list.files("./data_inputs/namesbystate",
pattern = ".TXT",
recursive = TRUE,
full.names = TRUE)
namesbystate <- data_frame()
for (i in seq_along(filesbystate)) {
namesbystate0 <- read.table(filesbystate[[i]], sep = ",")
namesbystate <- rbind(namesbystate, namesbystate0)
}
colnames(namesbystate) <- c("STATE","GENDER", "YEAR", "NAME", "COUNT")
rm(i, namesbystate0)
names <- namesbystate %>% group_by(YEAR, GENDER, NAME) %>%
summarise(COUNT = sum(COUNT))
View(names)
plot(names[NAME=="Amelia"], YEAR~COUNT)
plot(names[[NAME=="Amelia"]], YEAR~COUNT)
plot(names[which(NAME=="Amelia"),], YEAR~COUNT)
plot(names[which(names$NAME=="Amelia"),], YEAR~COUNT)
?plot
plot(names[which(names$NAME=="Amelia"),]$YEAR, names[which(names$NAME=="Amelia"),]$COUNT)
p <- filter(names, NAME == "Amelia") %>% ggplot(aes(YEAR, COUNT))
library(ggplot2)
p <- filter(names, NAME == "Amelia") %>% ggplot(aes(YEAR, COUNT))
p
p <- filter(names, NAME == "Amelia") %>%
ggplot(aes(YEAR, COUNT)) +
geom_line()
p
p
saveRDS(names,"./assignments/pa2/data_outputs")
saveRDS(names,"./data_outputs")
saveRDS(namesbystate,"./data_outputs/namesbystate.Rds")
rm(list=ls())
library(shiny)
runApp('assignments/pa2/R')
faithful
rm(list=ls())
suppressMessages(library(dplyr))
filesbystate <- list.files("./data_inputs/namesbystate",
pattern = ".TXT",
recursive = TRUE,
full.names = TRUE)
getwd()
filesbystate <- list.files("./assignments/pa2/data_inputs/namesbystate",
pattern = ".TXT",
recursive = TRUE,
full.names = TRUE)
namesbystate <- data_frame()
for (i in seq_along(filesbystate)) {
namesbystate0 <- read.table(filesbystate[[i]], sep = ",")
namesbystate <- rbind(namesbystate, namesbystate0)
}
colnames(namesbystate) <- c("STATE","GENDER", "YEAR", "NAME", "COUNT")
rm(i, namesbystate0)
## create data set without States
names <- namesbystate %>% group_by(YEAR, GENDER, NAME) %>%
summarise(COUNT = sum(COUNT))
saveRDS(names, "./assignments/pa2/data_outputs/ssnames.Rds")
saveRDS(namesbystate,"./assignments/pa2/data_outputs/ssnames_by_state.Rds")
install.packages("plotly")
rm(list=ls())
install.packages("babynames")
library(plotly); library(ggplot2); library(babynames)
data("babynames")
babynames <- data("babynames")
data("babynames")
names <- babynames%>%head(
)
View(names)
View(names)
?spread
names_both <- babynames %>% spread(sex, n)
library(tidyr); library(dplyr)
names_both <- babynames %>% spread(sex, n)
View(names)
View(names_both)
rm(named_commas())
rm(name
)
rm(names)
names_both <- babynames %>% spread(sex, n) %>% mutate(total = F + M)
View(names_both)
data("babynames")
names_both <- babynames %>% spread(sex, n) %>%
mutate(total = sum(F, M, na.rm=TRUE))
View(names_both)
data("babynames")
names_both <- babynames %>% spread(sex, n) %>% group_by(year, name) %>%
mutate(total = sum(F, M, na.rm=TRUE))
View(names_both)
names_both <- babynames %>% spread(sex, n) %>% group_by(year, name) %>%
mutate(total = sum(F, M))
View(names_both)
names_both <- babynames %>% spread(sex, n) %>%
group_by(year, name) %>%
mutate(total = sum(F, M)) %>%
filter(!is.na(total))
View(names_both)
Sys.Date("%Y")
Sys.Date(format = "%Y")
?Sys.Date()
?date()
View(babynames)
names_both <- babynames %>%
filter(year >= 2016 - 20) %>%
group_by(name) %>%
summarise(sum(n))
View(names_both)
?summarize()
names_both <- babynames %>%
filter(year >= 2016 - 20) %>% group_by(sex, name) %>%
summarize(sum(n))
View(names_both)
names_both <- babynames %>%
filter(year >= 2016 - 20) %>% group_by(sex, name) %>%
summarize(n = sum(n)) %>%
spread(sex, n)
View(names_both)
names_both <- babynames %>%
filter(year >= 2016 - 20) %>% group_by(sex, name) %>%
summarize(n = sum(n)) %>%
spread(sex, n) %>%
group_by(name) %>%
mutate(total = sum(F, M))
View(names_both)
names_both <- babynames %>%
filter(year >= 2016 - 20) %>% group_by(sex, name) %>%
summarize(n = sum(n)) %>%
spread(sex, n) %>%
group_by(name) %>%
mutate(total = sum(F, M)) %>%
filter(!is.na(total))
View(names_both)
?rank
names_both_top20 <- names_both %>% mutate(ranking = rank(total))
View(names_both_top20)
names_both_top20 <- names_both %>% mutate(ranking = rank(total, "first"))
View(names_both_top20)
names_both_top20 <- names_both %>% ungroup() %>%
mutate(ranking = rank(total))
View(names_both_top20)
names_both_top20 <- names_both %>% ungroup() %>%
mutate(ranking = rank(total, "max"))
View(names_both)
View(names_both_top20)
class(names_both_top20$total)
names_both_top20 <- names_both %>% ungroup() %>%
arrange(total, name)
View(names_both_top20)
names_both_top20 <- names_both %>% ungroup() %>%
arrange(desc(total), name)
View(names_both)
View(names_both_top20)
View(babynames)
View(names_both)
names_both <- babynames %>%
filter(year >= 2016 - 20) %>% group_by(sex, name) %>%
summarize(n = sum(n)) %>%
spread(sex, n) %>%
group_by(name) %>%
mutate(total = sum(F, M),
prob_F = F/total,
Prob_M = M/total) %>%
filter(prob_F > 1/3 & Prob_M > 1/3) %>% ungroup()
View(names_both_top20)
View(names_both)
names_both_top20 <- names_both %>%
arrange(desc(total), name)
View(names_both_top20)
names_both_top20 <- names_both %>%
arrange(desc(total), name) %>%
mutate(ranking = rank(total))
View(names_both_top20)
names_both_top20 <- names_both %>%
arrange(desc(total), name) %>%
mutate(ranking = rank(total, "first"))
View(names_both_top20)
names_both_top20 <- names_both %>%
arrange(desc(total), name) %>%
filter(total >= top_n(20))
?min_rank()
?top_n
names_both_top20 <- names_both %>% as_data_frame()%>%
arrange(desc(total), name) %>%
filter(total >= top_n(20))
names_both_top20 <- names_both %>% as.tbl()%>%
arrange(desc(total), name) %>%
filter(total >= top_n(20))
names_both_top20 <- names_both %>% as.tbl()%>%
arrange(desc(total), name) %>%
filter(top_n(total, 20))
names_both_top20 <- names_both %>% as.tbl()%>%
arrange(desc(total), name) %>%
top_n(total, 20)
names_both_top20 <- names_both %>%
arrange(desc(total), name) %>%
head(1:20)
names_both_top20 <- names_both %>%
arrange(desc(total), name) %>%
head(20)
View(names_both_top20)
names_both <- babynames %>%
filter(year >= 2016 - 20) %>% group_by(sex, name) %>%
summarize(n = sum(n)) %>%
group_by(name) %>%
mutate(total = sum(n),
prob = n/total)
View(names_both)
names_both <- babynames %>%
filter(year >= 2016 - 20) %>% group_by(sex, name) %>%
summarize(n = sum(n)) %>%
group_by(name) %>%
mutate(total = sum(n),
prob = n/total,
cutoff = ifelse(prob > 1/3, 1, 0),
cutoff_both = sum(cutoff))
View(names_both)
names_both <- babynames %>%
filter(year >= 2016 - 20) %>% group_by(sex, name) %>%
summarize(n = sum(n)) %>%
group_by(name) %>%
mutate(total = sum(n),
prob = n/total,
cutoff = ifelse(prob > 1/3, 1, 0),
cutoff_both = sum(cutoff)) %>%
filter(cutoff_both = 2) %>% ungroup()
names_both <- babynames %>%
filter(year >= 2016 - 20) %>% group_by(sex, name) %>%
summarize(n = sum(n)) %>%
group_by(name) %>%
mutate(total = sum(n),
prob = n/total,
cutoff = ifelse(prob > 1/3, 1, 0),
cutoff_both = sum(cutoff)) %>%
filter(cutoff_both == 2) %>% ungroup()
View(names_both)
names_both_top20 <- names_both %>%
arrange(desc(total), name) %>% head(20)
View(names_both_top20)
names_both_top20 <- names_both %>%
arrange(desc(total), name) %>% head(40)
View(names_both_top20)
p <- ggplot(names_both_top20, aes(total) )
p <- ggplot(names_both_top20, aes(total))
p
p <- ggplot(names_both_top20, aes(total)) + geom_bar()
p
p <- ggplot(names_both_top20, aes(name, total)) + geom_bar()
p
p <- ggplot(names_both_top20, aes(name)) + geom_bar()
p
p <- ggplot(names_both_top20, aes(name)) + geom_bar(total)
p <- ggplot(names_both_top20, aes(name)) + geom_bar(aes(total))
p
p <- ggplot(names_both_top20, aes(name, sex)) + geom_bar(aes(total))
p
p <- ggplot(names_both_top20, aes(name, sex)) + geom_bar()
p
data(mpg)
head(mpg)
p <- ggplot(names_both_top20, aes(name, fill = sex)) + geom_bar(position = "fill")
p
ggplot(mpg, aes(fl, fill = drv)) + geom_bar(position = "dodge")
ggplot(mpg, aes(fl, fill = drv)) +
geom_bar(position = "dodge", stat = "identity"
ggplot(mpg, aes(fl, fill = drv)) +
geom_bar(position = "dodge", stat = "identity")
ggplot(mpg, aes(fl, cty, fill = drv)) +
geom_bar(position = "dodge", stat = "identity")
p <- ggplot(names_both_top20, aes(name, total, fill = sex)) +
geom_bar(position = "fill")
p
p <- ggplot(names_both_top20, aes(name, total, fill = sex)) +
geom_bar(position = "fill", stat = "identity")
p
p <- ggplot(names_both_top20, aes(name, n, fill = sex)) +
geom_bar(position = "fill", stat = "identity")
p
p <- ggplot(names_both_top20, aes(name, n, fill = sex)) +
geom_bar(position = "fill", stat = "identity") +
coord_flip()
p
?geom_bar
p <- ggplot(names_both_top20, aes(name, n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
coord_flip()
p
p <- ggplot(names_both_top20, aes(name, n, fill = sex)) +
geom_bar(position = "stack") +
coord_flip()
p
p <- ggplot(names_both_top20, aes(name, n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
coord_flip()
p
names_both_top20$name <- factor(names_both_top20$name, levels = row_number())
row_number(names_both_top20)
row_number(names_both_top20$name)
names_both_top20$name <- factor(names_both_top20$name,
levels = c(1:20))
p <- ggplot(names_both_top20, aes(name, n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
coord_flip()
p
factor(names_both_top20$name,
levels = c(1:20))
names_both_top20 <- names_both %>%
arrange(desc(total), name) %>% head(40)
p <- ggplot(names_both_top20, aes(name, n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
coord_flip()
p
plot_ly(p)
ggplot_ly(p)
ggplotly(p)
?relevel()
library(forcats)
p <- ggplot(names_both_top20, aes(fct_reorder(name, n), n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
coord_flip()
ggplotly(p)
p <- ggplot(names_both_top20, aes(fct_reorder(name, n), n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
labs(title = "Most Common Unisex Names", x = "Name",
y = "Count of People with Name") +
coord_flip()
ggplotly(p)
rm(mpg)
max(babynames$year)
library(ggthemes)
p <- ggplot(names_both_top20, aes(fct_reorder(name, n), n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
labs(title = "Top 20 Most Common Unisex Names", x = "Name",
y = "Count of People with Name (born 1994 - 2014") +
coord_flip() +
theme_fivethirtyeight()
p
p <- ggplot(names_both_top20, aes(fct_reorder(name, n), n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
labs(title = "Top 20 Most Common Unisex Names", x = "Name",
y = "Count of People with Name (born 1994 - 2014") +
coord_flip() +
theme_fivethirtyeight()
ggplotly(p)
p <- ggplot(names_both_top20, aes(fct_reorder(name, n), n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
labs(title = "Top 20 Most Common Unisex Names", x = "Name",
y = "Count of People with Name (born 1994 - 2014") +
# coord_flip() +
theme_fivethirtyeight()
ggplotly(p)
p <- ggplot(names_both_top20, aes(fct_reorder(name, n), n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
labs(title = "Top 20 Most Common Unisex Names", x = "Name",
y = "Count of People with Name (born 1994 - 2014") +
coord_flip() +
theme_fivethirtyeight()
ggplotly(p)
p <- ggplot(names_both_top20, aes(fct_reorder(name, n), n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
labs(title = "Top 20 Most Common Unisex Names", x = "Name",
y = "Count of People with Name (born 1994 - 2014") +
coord_flip() +
theme_economist()
ggplotly(p)
p <- ggplot(names_both_top20,
aes(Name = fct_reorder(name, n), Count = n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
labs(title = "Top 20 Most Common Unisex Names", x = "Name",
y = "Count of People with Name (born 1994 - 2014)") +
coord_flip() +
theme_economist()
ggplotly(p)
p <- ggplot(names_both_top20,
aes(fct_reorder(name, n), n, fill = sex,
text = paste("Name:", name))) +
geom_bar(position = "stack", stat = "identity") +
labs(title = "Top 20 Most Common Unisex Names", x = "Name",
y = "Count of People with Name (born 1994 - 2014)") +
coord_flip() +
theme_economist()
ggplotly(p)
p <- ggplot(names_both_top20,
aes(x = fct_reorder(name, n), y = n, fill = sex,
text = paste("Name:", name))) +
geom_bar(position = "stack", stat = "identity") +
labs(title = "Top 20 Most Common Unisex Names", x = "Name",
y = "Count of People with Name (born 1994 - 2014)") +
coord_flip() +
theme_economist()
ggplotly(p)
p <- ggplot(names_both_top20,
aes(x = fct_reorder(name, n), y = n, fill = sex)) +
geom_bar(position = "stack", stat = "identity",
text = name) +
labs(title = "Top 20 Most Common Unisex Names", x = "Name",
y = "Count of People with Name (born 1994 - 2014)") +
coord_flip() +
theme_economist()
names_both_top20 <- names_both %>%
arrange(desc(total), name) %>%
mutate(name = fct_reorder(name, n)) %>%
head(40)
p <- ggplot(names_both_top20,
aes(x = name, y = n, fill = sex)) +
geom_bar(position = "stack", stat = "identity") +
labs(title = "Top 20 Most Common Unisex Names", x = "Name",
y = "Count of People with Name (born 1994 - 2014)") +
coord_flip() +
theme_economist()
ggplotly(p)
?babynames
suppressMessages(library(dplyr))
filesbystate <- list.files("./assignments/pa2/data_inputs/namesbystate",
pattern = ".TXT",
recursive = TRUE,
full.names = TRUE)
namesbystate <- data_frame()
for (i in seq_along(filesbystate)) {
namesbystate0 <- read.table(filesbystate[[i]], sep = ",")
namesbystate <- rbind(namesbystate, namesbystate0)
}
colnames(namesbystate) <- c("STATE","GENDER", "YEAR", "NAME", "COUNT")
for (i in seq_along(filesbystate)) {
namesbystate0 <- read.table(filesbystate[[i]], sep = ",")
namesbystate <- rbind(namesbystate, namesbystate0)
}
colnames(namesbystate) <- c("STATE","GENDER", "YEAR", "NAME", "COUNT")
filesbystate <- list.files("./assignments/pa2/data_inputs/namesbystate",
pattern = ".TXT",
recursive = TRUE,
full.names = TRUE)
filesbystate <- list.files("./assignments/pa3/data_inputs/namesbystate",
pattern = ".TXT",
recursive = TRUE,
full.names = TRUE)
namesbystate <- data_frame()
for (i in seq_along(filesbystate)) {
namesbystate0 <- read.table(filesbystate[[i]], sep = ",")
namesbystate <- rbind(namesbystate, namesbystate0)
}
colnames(namesbystate) <- c("STATE","GENDER", "YEAR", "NAME", "COUNT")
rm(i, namesbystate0)
names <- namesbystate %>% group_by(YEAR, GENDER, NAME) %>%
summarise(COUNT = sum(COUNT))
rm(filesbystate)
rm(list=ls())
names <- readRDS("../data_outputs/names")
names <- readRDS("../data_outputs/ssnames.Rds")
getwd()
