{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Fuel Efficiency Analysis of 'mtcars' Data\"\nauthor: \"A. Liu\"\ndate: \"September 1, 2017\"\noutput: pdf_document\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE);options(scipen=999)\n```\n\n## Executive Summary\n\nxxxxx\n\n## Exploratory Data Analysis\n\nBefore delving into the specific question regarding fuel efficiency (mpg), we will first explore the 'mtcars' data set to find out more about its structure, its variables and the relationship between them.\n\n```{r message=FALSE, warning=FALSE}\n## Load data set and required packages\ndata(\"mtcars\")\nlibrary(knitr); library(tidyverse); library(ggplot2); library(GGally)\n## View the first few observations of the data set\nhead(mtcars,3) %>% kable()\n```\n\nWe can see that each line of *mtcars* represents one model of car, which are labelled in the rownames. Each column is then one attribute of the specific model, such as the miles per gallon (**mpg**), the number of cylinders (**cyl**), the engine's horsepower (**hp**), whether the car has an automatic or manual transmission (**am**), etc.\n\nTo get an better idea of the relationship between mpg and the rest of the variables, we start by exploring the correlations among them. The computed correlation coefficients are shown below. For simplicity, it only shows the correlation between mpg and the rest of the variables. See Figure 1 for the full pairwise correlation between all the variables.\n\n```{r}\ncorr <- cor(mtcars) %>% as.data.frame() %>% rownames_to_column(var = \"var\") %>%\n         filter(var == \"mpg\") %>% format(digits = 3)\nkable (corr)\n```\n\nFrom the coefficients, we can see that the variable of interest **am** is positively correlated with **mpg** at 0.6, which is moderately strong. We can also detect other variables with a strong linear relationship with **mpg**.\n\n## Is an automatic or manual transmission better for MPG\n\n### Regression Models - Single Variable\n\nFocusing the specific relationship between type of transmission and fuel efficiency, we first compare the differences in distribution between the two groups (automatic vs. manual). The boxplot in Figure 2 shows the comparision. From the visualization, we can form a hypothesis that manual cars have a higher miles per gallon, and therefore a better fuel efficiency. To comfirm this hypothesis, we can fit a single linear model.\n\n```{r}\nfit_1 <- lm(mpg ~ am, data = mtcars)\nsummary(fit_1)[c(\"coefficients\", \"r.squared\")]\n```\n\nThe intercept is the average miles per gallon when am is equal to 0 (i.e. automatic transmission) and the slope of the \"am\"\" variable show the effect of the change in transmission type (from 0 to 1) on fuel efficiency: using 1 gallon of gas, cars with manual transmission can travel 7.24 more miles than those with automatic transmission. Additionally, the low p-value suggests that the effect is not due to chance alone. However, we can see that the R-squared statistic is at 0.3598, meaning that only 35.98% of the variation in \"mpg\" is explained by this model.  \n\n### Regression Models - Multiple Regresssion\n\nRecall that in the exploratory analysis, we detected other variables with a strong correlation to the \"mpg\". We can try adding \"wt\" to the model (the variable with the highest correlation to \"mpg\") and see if the model strength improves.\n\n```{r}\nfit_m1 <- lm(mpg ~ am + wt, data = mtcars)\nsummary(fit_m1)[c(\"coefficients\", \"r.squared\")]\n```\n\nIt turns out that, after accouting for the effect of weight on fuel efficiency, the type of transmission ceases to be a significant variable. The coefficients suggest that as the weight of the car increase 1000 lbs, the car travels 5.35 miles less using 1 gallon of gas. Additionally, the R-squared statistic improvec to 0.7528.\n\nFinally, we can employ a more \"automatic\" variable selection strategy.  and perform a stepwise\n\n```{r}\nlibrary(leaps)\nt <- summary(regsubsets(mpg ~ ., data = mtcars))\nt\nstep(fit_m2, direction = \"backward\")\nsummary(fit_m2)$coef\n```\n\n\n### Residual Diagnostics\n\n## Appendix\n\n### Figure 1. Pairwise Correlation Plot\n\n```{r cache = TRUE, fig.height = 8, fig.width = 10}\ncorr_plot <- mtcars %>% \n        ggpairs(upper = list(continuous = wrap(\"cor\", size = 4)),\n                lower = list(continuous = wrap(\"smooth\", method = \"lm\"))\n                ) %>% print(progress = FALSE)\n```\n\n### Figure 2. Comparison of MPG - Automatic and Manual Transmissions\n\n```{r fig.height= 2, fig.width=2}\nboxplot_am <- mtcars %>% ggplot(aes(x = factor(am), y = mpg)) + geom_boxplot() + \n        scale_x_discrete(labels = c(\"Automatic\", \"Manual\")) +\n        labs(x = \"Transmission Type\", y = \"Miles per Gallon (MPG)\")\nboxplot_am\n```\n\n\n",
    "created" : 1504313827875.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2301654210",
    "id" : "2C25D163",
    "lastKnownWriteTime" : 1506827712,
    "last_content_update" : 1506827712864,
    "path" : "~/Downloads/OneDrive - Inter-American Development Bank Group/ForMe/Coursera_DataScience/07_Regression-Models/peer-graded_assignment/coursera_ds_regmods_write-up.Rmd",
    "project_path" : "coursera_ds_regmods_write-up.Rmd",
    "properties" : {
        "last_setup_crc32" : "E120F264d849636c"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}