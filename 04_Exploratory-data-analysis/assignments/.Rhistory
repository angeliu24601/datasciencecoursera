windows()
?par()
?text()
setwd("./exploratory-analysis_project1")
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
temp <- tempfile()
download.file(URL,temp)
unzip (temp,exdir = "./")
rm(URL,temp)
library(dplyr)
hpc <- read.table("./household_power_consumption.txt",
sep=";", na.strings="?", header=TRUE,
colClasses=c(rep("character",2), rep("numeric",7)))
hpc <- mutate(hpc, Date = as.Date(Date,"%d/%m/%Y"),
Time = as.POSIXct(strptime(paste(Date,Time),"%Y-%m-%d %H:%M:%S")))
View(hpc)
plot_data <- filter(hpc, Date == "2007-02-01" | Date == "2007-02-02")
png("./plot1.png", width = 480, height = 480)
png("./plot1.png", width = 480, height = 480)
with(plot_data,hist(Global_active_power,
col = "red", main = "Global Active Power",
xlab = "Global Active Power (kilowatts)"))
dev.off()
png("./plot2.png", width = 480, height = 480)
with(plot_data, plot(Time, Global_active_power,"l",
xlab ="", ylab = "Global Active Power (kilowatts)"))
dev.off()
png("./plot3.png", width = 480, height = 480)
with(plot_data, plot(Time, Sub_metering_1,"l",
xlab ="", ylab = "Energy sub metering"))
with(plot_data, lines(Time,Sub_metering_2,col="red"))
with(plot_data, lines(Time, Sub_metering_3, col="blue"))
legend ("topright",lty = c(1,1,1), col = c("black","red","blue"),
legend = c("Sub_metering_1","Sub_metering_2","Sub_metering_3"))
dev.off()
png("./plot4.png", width = 480, height = 480)
par(mfrow=c(2,2))
with(plot_data,{plot(Time, Global_active_power,"l",
xlab ="", ylab = "Global Active Power")
plot(Time, Voltage,"l",
xlab = "datetime", ylab = "Voltage")
plot(Time, Sub_metering_1,"l",
xlab = "", ylab = "Energy sub metering")
lines(Time,Sub_metering_2,col="red")
lines(Time, Sub_metering_3, col="blue")
legend ("topright",lty = c(1,1,1),
col = c("black","red","blue"), bty="n",
legend = c("Sub_metering_1",
"Sub_metering_2","Sub_metering_3"))
plot(Time, Global_reactive_power,"l", xlab = "datetime")
})
dev.off()
rm(list=ls())
## Download and upzip the data into the R working directory
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip"
temp <- tempfile()
download.file(URL,temp)
unzip (temp,exdir = "./")
rm(URL,temp)
## Load the data into R, transform date/time, and subset the data for the plots
library(dplyr)
hpc <- read.table("./household_power_consumption.txt",
sep=";", na.strings="?", header=TRUE,
colClasses=c(rep("character",2), rep("numeric",7)))
hpc <- mutate(hpc, Date = as.Date(Date,"%d/%m/%Y"),
Time = as.POSIXct(strptime(paste(Date,Time),"%Y-%m-%d %H:%M:%S")))
plot_data <- filter(hpc, Date == "2007-02-01" | Date == "2007-02-02")
## Plot 4
png("./plot4.png", width = 480, height = 480)
par(mfrow=c(2,2))
with(plot_data,{plot(Time, Global_active_power,"l",
xlab ="", ylab = "Global Active Power")
plot(Time, Voltage,"l",
xlab = "datetime", ylab = "Voltage")
plot(Time, Sub_metering_1,"l",
xlab = "", ylab = "Energy sub metering")
lines(Time,Sub_metering_2,col="red")
lines(Time, Sub_metering_3, col="blue")
legend ("topright",lty = c(1,1,1),
col = c("black","red","blue"), bty="n",
legend = c("Sub_metering_1",
"Sub_metering_2","Sub_metering_3"))
plot(Time, Global_reactive_power,"l", xlab = "datetime")
})
dev.off()
plot(1, 2)
class(plot(1,2))
x <- plot(1,2)
class(x)
library(nlme)
library(lattice)
xyplot(weight ~ Time | Diet, BodyWeight)
library(lattice)
?panel.lmline
library(lattice)
library(datasets)
data(airquality)
p <- xyplot(Ozone ~ Wind | factor(Month), data = airquality)
print(p)
?trellis.par.get
library(datasets)
data(airquality)
qplot(Wind, Ozone, data = airquality, facets = . ~ factor(Month))
library(ggplot2)
qplot(Wind, Ozone, data = airquality, facets = . ~ factor(Month))
airquality = transform(airquality, Month = factor(Month))
qplot(Wind, Ozone, data = airquality, facets = . ~ Month)
library(ggplot2)
library(ggplot2movies)
install.packages("ggplot2movies")
library(ggplot2)
library(ggplot2movies)
g <- ggplot(movies, aes(votes, rating))
print(g)
qplot(votes, rating, data = movies)
qplot(votes, rating, data = movies) + geom_smooth()
qplot(votes, rating, data = movies, smooth = "loess")
qplot(votes, rating, data = movies) + stats_smooth("loess")
qplot(votes, rating, data = movies)
bwplot(1,2)
x <- bwplot(1,2)
class(x)
rm(list=ls())
URL <- "https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2FNEI_data.zip"
temp <- tempfile()
download.file(URL,temp, method = "curl")
unzip (temp,exdir = "./exploratory-analysis_project2")
rm(URL,temp)
library(dplyr)
library(ggplot2)
NEI <- readRDS("./exdata-013/summarySCC_PM25.rds")
NEI <- readRDS("./exploratory-analysis_project2/summarySCC_PM25.rds")
SCC <- readRDS("./exploratory-analysis_project2/Source_Classification_Code.rds")
View(NEI)
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions))
View(NEI.yearsum)
View(NEI.yearsum)
?rename()
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions)) %>%
rename(sum_emmissions = sum(Emissions))
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions)) %>%
rename(sum_emmissions = "sum(Emissions)")
colnames(NEI.yearsum)
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions)) %>%
rename(sum_emmissions = 'sum(Emissions)')
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions)) %>%
rename(sum_emissions = sum(Emissions))
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions)) %>%
rename(sum(Emissions) = sum_emissions)
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions)) %>%
rename('sum(Emissions)' = sum_emissions)
colnames(NEI.yearsum) <- c("year","sum_emissions")
png("./exploratory-analysis_project2/plot1.png")
dev.off()
rm(NEI_year,NEI.yearsum)
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions))
colnames(NEI.yearsum) <- c("year","sum_emissions")
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
getwd()
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
dev.off()
rm(NEI.yearsum)
View(NEI)
View(NEI)
class(NEI$year)
class(NEI.yearsum$year) <- "factor"
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions))
colnames(NEI.yearsum) <- c("year","sum_emissions")
class(NEI.yearsum$year) <- "factor"
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
class(NEI.yearsum$year) <- as.factor()
NEI.yearsum$year <- as.factor(NEI.yearsum$year)
png("./exploratory-analysis_project2/plot1.png")
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions))
colnames(NEI.yearsum) <- c("year","sum_emissions")
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
axis(1, labels = c(NEI.yearsum$year))
NEI.yearsum <- NEI %>% group_by(year) %>% summarize(sum(Emissions))
colnames(NEI.yearsum) <- c("year","sum_emissions")
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
axis(1, at = 1:4, labels = c(NEI.yearsum$year))
dev.off()
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
axis(1, at = 1:4, labels = c(1999, 2002, 2005, 2008))
dev.off()
?axis
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
axis(1, at = c(1999, 2002, 2005, 2008))
dev.off()
NEI.BC.year.sum <- NEI %>% filter(NEI, fips == "24510") %>% group_by(year) %>%
summarize(sum(Emissions))
View(NEI)
NEI.BC.year.sum <- NEI %>% filter(fips == "24510") %>% group_by(year) %>%
summarize(sum(Emissions))
colnames(NEI.BC.year.sum) <- c("year","sum_emissions")
png("./exploratory-analysis_project2/plot2.png")
with(NEI.BC.year.sum, plot(year,sum_emissions))
View(NEI.BC.year.sum)
axis(1, at = c(1999, 2002, 2005, 2008))
dev.off()
NEI.BC.year.sum.type <- NEI %>% filter(fips == "24510") %>% group_by(year,type) %>%
summarize(sum(Emissions))
NEI.BC.year.sum.type <- NEI %>% filter(fips == "24510") %>% group_by(year,type) %>%
summarize(sum(Emissions))
png("./exploratory-analysis_project2/plot3.png")
qplot(year,sum_emissions,data = NEI.BC.year.sum.type, facets = .~ type)
View(NEI.BC.year.sum.type)
colnames(NEI.BC.year.sum.type) <- c("year", "type","sum_emissions")
View(NEI.BC.year.sum.type)
png("./exploratory-analysis_project2/plot3.png")
qplot(year,sum_emissions,data = NEI.BC.year.sum.type, facets = .~ type)
dev.off()
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions))
pl3
print(pl3)
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions)) +
geom_point()
pl3
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions)) +
geom_point(shape = 1)
pl3
pl3 + facet(type ~)
pl3 + facet(type ~ .)
pl3 + facet_grid(type ~ .)
dev.off()
png("./exploratory-analysis_project2/plot3.png")
dev.off()
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions)) +
geom_point()
x <- pl3 + facet_grid(type ~ .)
x
dev.off()
x <- pl3 + facet_wrap (type ~, ncol = 2)
x <- pl3 + facet_wrap (type ~., ncol = 2)
dev.off()
png("./exploratory-analysis_project2/plot3.png")
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions)) +
geom_point()
x <- pl3 + facet_wrap (type ~., ncol = 2)
x
dev.off()
x <- pl3 + facet_wrap (~ type, ncol = 2)
x
dev.off()
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions)) +
geom_point()
pl3
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions) +
geom_point())
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions)) +
geom_point(shape = 1)
pl3
dev.off()
View(NEI.BC.year.sum.type)
png("./exploratory-analysis_project2/plot3.png")
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions)) +
geom_point(shape = 1)
x <- pl3 + facet_wrap (~ type, ncol = 2)
x
dev.off()
rm(x)
png("./exploratory-analysis_project2/plot3.png")
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions)) +
geom_point(shape = 1) + facet_wrap (~ type, ncol = 2)
dev.off()
png("./exploratory-analysis_project2/plot3.png")
pl3 <- ggplot(NEI.BC.year.sum.type, aes(x = year, y = sum_emissions)) +
geom_point(shape = 1) + facet_wrap (~ type, ncol = 2)
pl3
dev.off()
SCC_CoalCombustion <- SCC[grepl("[Cc]ombustion",SCC$SCC.Level.One) ==TRUE & grepl("[Cc]oal",SCC$SCC.Level.Three)==TRUE,]
NEI_CoalCombustion <- filter(NEI,SCC %in% SCC_CoalCombustion$SCC)
png("./exploratory-analysis_project2/plot4.png")
png("./exploratory-analysis_project2/plot4.png")
ggplot(NEI_CoalCombustion,aes(x=year, y = Emissions)) +
stat_summary(fun.y = sum,geom="bar")
dev.off()
View(NEI_CoalCombustion)
class(NEI_CoalCombustion$year)
NEI_CoalCombustion$year <- as.factor(NEI_CoalCombustion$year)
class(NEI_CoalCombustion$year)
png("./exploratory-analysis_project2/plot4.png")
ggplot(NEI_CoalCombustion,aes(x=year, y = Emissions)) +
stat_summary(fun.y = sum,geom="bar")
dev.off()
png("./exploratory-analysis_project2/plot4.png")
ggplot(NEI_CoalCombustion,aes(x=year, y = Emissions)) +
stat_summary(fun.y = sum,geom="bar") +
ylab("emissions from coal combustion-related sources")
dev.off()
NEI.BC <- filter(NEI, fips == "24510")
SCC_MV <- SCC[grepl("[Vv]ehicle",SCC$SCC.Level.Two) ==TRUE | grepl("[Ee]nginel",SCC$SCC.Level.Two)==TRUE,]
NEI.BC.MV <- filter(NEI_BC,SCC %in% SCC_MV$SCC)
png("./exploratory-analysis_project2/plot5.png")
ggplot(NEI_BC_MV,aes(x=year, y = Emissions)) +
stat_summary(fun.y = sum,geom="bar")
dev.off()
png("./exploratory-analysis_project2/plot5.png")
ggplot(NEI.BC.MV,aes(x=year, y = Emissions)) +
stat_summary(fun.y = sum,geom="bar")
dev.off()
NEI.BC <- NEI %>% filter(fips == "24510") %>% filter(SCC %in% SCC_MV$SCC)
View(NEI.BC)
png("./exploratory-analysis_project2/plot5.png")
ggplot(NEI.BC.MV,aes(x=year, y = Emissions)) +
stat_summary(fun.y = sum,geom="bar")
dev.off()
NEI.BC.MV <- NEI %>% filter(fips == "24510") %>% filter(SCC %in% SCC_MV$SCC)
png("./exploratory-analysis_project2/plot5.png")
ggplot(NEI.BC.MV,aes(x=year, y = Emissions)) +
stat_summary(fun.y = sum,geom="bar")
dev.off()
NEI.BC.MV$year <- as.factor(NEI.BC.MV$year)
png("./exploratory-analysis_project2/plot5.png")
ggplot(NEI.BC.MV,aes(x=year, y = Emissions)) +
stat_summary(fun.y = sum,geom="bar")
dev.off()
png("./exploratory-analysis_project2/plot5.png")
ggplot(NEI.BC.MV,aes(x=year, y = Emissions)) +
stat_summary(fun.y = sum,geom="bar") +
ylab("emissions from motor vehicle sources")
dev.off()
SCC_MV <- SCC[grepl("[Vv]ehicle",SCC$SCC.Level.Two) ==TRUE | grepl("[Ee]nginel",SCC$SCC.Level.Two)==TRUE,]
##Subset the emissions from Baltimore City and Los Angeles County and filer
##the emissions related to motor vehicle
NEI.BC.LA.MV <- NEI %>% filter(NEI,fips == "06037" | fips == "24510") %>%
filter(NEI_BC_LA,SCC %in% SCC_MV$SCC)
##Plot the comparison of the two
png("./exploratory-analysis_project2/plot6.png")
ggplot(NEI.BC.LA.MV,aes(x=year, y = Emissions)) + stat_summary(fun.y = sum, geom="bar") + facet_grid(.~fips)
dev.off()
SCC_MV <- SCC[grepl("[Vv]ehicle",SCC$SCC.Level.Two) ==TRUE | grepl("[Ee]nginel",SCC$SCC.Level.Two)==TRUE,]
NEI.BC.LA.MV$year <- as.factor(NEI.BC.LA.MV$year)
NEI.BC.LA.MV <- NEI %>% filter(fips == "06037" | fips == "24510") %>%
filter(SCC %in% SCC_MV$SCC)
NEI.BC.LA.MV$year <- as.factor(NEI.BC.LA.MV$year)
png("./exploratory-analysis_project2/plot6.png")
ggplot(NEI.BC.LA.MV,aes(x=year, y = Emissions)) + stat_summary(fun.y = sum, geom="bar") + facet_grid(.~fips)
dev.off()
NEI.BC.LA.MV <- NEI %>% filter(fips == "06037" | fips == "24510") %>%
filter(SCC %in% SCC_MV$SCC) %>%
mutate(county = ifelse(fips == "06037", "LA County", "Baltimore City"))
png("./exploratory-analysis_project2/plot6.png")
ggplot(NEI.BC.LA.MV,aes(x=year, y = Emissions)) +
stat_summary(fun.y = sum, geom="bar") + facet_grid(.~ county) +
ylab("emissions from motor vehicle sources")
dev.off()
View(NEI.yearsum)
NEI.yearsum$year <- as.factor(NEI.yearsum)
NEI.yearsum$year <- as.factor(NEI.yearsum$year)
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
axis(1, at = c(1999, 2002, 2005, 2008))
dev.off()
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, plot(year,sum_emissions))
dev.off()
View(NEI.yearsum)
with(NEI.yearsum, barplot(year,sum_emissions))
with(NEI.yearsum, barplot(sum_emissions))
dev.off()
png("./exploratory-analysis_project2/plot1.png")
with(NEI.yearsum, barplot(sum_emissions))
axis(1, labels = NEI.yearsum$year)
dev.off()
png("./exploratory-analysis_project2/plot1.png")
pl1 <- with(NEI.yearsum, barplot(sum_emissions))
axis(1, at = pl1, labels = NEI.yearsum$year)
dev.off()
png("./exploratory-analysis_project2/plot1.png")
pl1 <- with(NEI.yearsum, barplot(sum_emissions))
axis(1, at = pl1, labels = NEI.yearsum$year)
xlab = "year"
ylab = "emissions"
dev.off()
png("./exploratory-analysis_project2/plot1.png")
pl1 <- with(NEI.yearsum,
barplot(sum_emissions, xlab = "year", ylab = "emissions"))
axis(1, at = pl1, labels = NEI.yearsum$year)
dev.off()
NEI.BC.year.sum$year <- as.factor(NEI.BC.year.sum$year)
png("./exploratory-analysis_project2/plot2.png")
pl2 <- with(NEI.BC.year.sum,
barplot(year,sum_emissions, xlab = "year", ylab = "emissions"))
axis(1, at = pl2, labels = NEI.BC.year.sum)
dev.off()
View(NEI.BC.year.sum)
png("./exploratory-analysis_project2/plot2.png")
pl2 <- with(NEI.BC.year.sum,
barplot(sum_emissions, xlab = "year", ylab = "emissions"))
axis(1, at = pl2, labels = NEI.BC.year.sum)
dev.off()
png("./exploratory-analysis_project2/plot2.png")
pl2 <- with(NEI.BC.year.sum,
barplot(sum_emissions, xlab = "year", ylab = "emissions"))
axis(1, at = pl2, labels = NEI.BC.year.sum$year)
dev.off()
png("./exploratory-analysis_project2/plot2.png")
pl2 <- with(NEI.BC.year.sum,
barplot(sum_emissions, main = "Emissions by year in Baltimore City"
xlab = "year", ylab = "emissions"))
axis(1, at = pl2, labels = NEI.BC.year.sum$year)
dev.off()
png("./exploratory-analysis_project2/plot2.png")
pl2 <- with(NEI.BC.year.sum,
barplot(sum_emissions, main = "Emissions by year in Baltimore City",
xlab = "year", ylab = "emissions"))
axis(1, at = pl2, labels = NEI.BC.year.sum$year)
dev.off()
png("./exploratory-analysis_project2/plot1.png")
pl1 <- with(NEI.yearsum,
barplot(sum_emissions, main = "Emissions by year in Baltimore City",
xlab = "year", ylab = "emissions"))
axis(1, at = pl1, labels = NEI.yearsum$year)
dev.off()
png("./exploratory-analysis_project2/plot1.png")
pl1 <- with(NEI.yearsum,
barplot(sum_emissions, main = "Emissions by year in US",
xlab = "year", ylab = "emissions"))
axis(1, at = pl1, labels = NEI.yearsum$year)
dev.off()
